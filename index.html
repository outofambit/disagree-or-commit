<!DOCTYPE html>

<head>
  <title>disagree or commit</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <div class="phrase" aria-live="polite" aria-atomic="true">
    <span id="disagree" class="clickableWord" role="button" tabindex="0">disagree</span>
    and
    <span id="commit" class="clickableWord" role="button" tabindex="0">commit</span>
  </div>
  <script>
    const run = () => {

      // stolen from https://dev.to/codebubb/how-to-shuffle-an-array-in-javascript-2ikj
      const shuffleArray = (array) => {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          const temp = array[i];
          array[i] = array[j];
          array[j] = temp;
        }
      }

      const setupDisagreementReplacements = () => {
        const disagreeReplacements = [
          "disappoint",
          "distract",
          "desire",
          "disentangle",
          "delouse",
          "drag it out",
          "don't worry",
          "double dog dare",
          "date on and off for years"
        ];
        shuffleArray(disagreeReplacements);
        let disagreeReplacementsIndex = 0;
        const disagreeClickHandler = function (element, event) {
          document.getElementById("commit").textContent = "commit";
          document.getElementById("disagree").textContent =
            disagreeReplacements[disagreeReplacementsIndex];
          // update for next time
          disagreeReplacementsIndex++;
          if (disagreeReplacementsIndex > disagreeReplacements.length - 1) {
            shuffleArray(disagreeReplacements)
            disagreeReplacementsIndex = 0
          }
        };
        document
          .getElementById("disagree")
          .addEventListener("click", disagreeClickHandler);
      }

      const setupCommitReplacements = () => {
        const commitReplacements = [
          "comply",
          "contradict",
          "co-opt",
          "create",
          "co-regulate",
          "develop a crush",
          "cuddle",
          "catastrophize",
          "collate",
          "carve up",
          "omit"
        ];
        shuffleArray(commitReplacements);
        let commitReplacementsIndex = 0;

        const commitClickHandler = function (element, event) {
          document.getElementById("disagree").textContent = "disagree";
          document.getElementById("commit").textContent =
            commitReplacements[commitReplacementsIndex];
          // update for next time
          commitReplacementsIndex++;
          if (commitReplacementsIndex > commitReplacements.length - 1) {
            shuffleArray(commitReplacements)
            commitReplacementsIndex = 0
          }
        };
        document
          .getElementById("commit")
          .addEventListener("click", commitClickHandler);
      };

      setupDisagreementReplacements();
      setupCommitReplacements();
    }

    run();
  </script>
</body>